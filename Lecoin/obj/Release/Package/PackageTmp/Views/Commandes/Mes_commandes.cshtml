
@{
    ViewBag.Title = "Mes_commandes";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Lecoin.VM.ComViewModel
<div id="accordion">
    <div class="row">
        <div class="card col-sm-6">
            <div class="card-header" id="headingOne" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <h2 class="mb-0">
                    Commandes envoyées
                </h2>
            </div>
            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                <div class="card-body">
                    <div class="row">
                        @foreach (var item in Model.CommandeEnvoye)
                        {
                            <div class="col-sm-5 one-commande">
                                <p style="font-size:10px;color:gray">Commande du : @item.Date.ToString("dd MMM yyyy")</p>
                                <p>A livrer à : @item.Lieu</p>
                                <h6>Numéro de commande : <span class="text-success">@item.NumeroCommande</span></h6>
                                <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModal/@item.NumeroCommande">Article commandé</button>
                                @if (item.IsDelivred == true)
                                {
                                    <button class="btn btn-success">Livré</button>
                                }
                                else
                                {
                                    <button class="btn btn-danger">Non Livré</button>
                                }
                            </div>

                            <div class="modal fade" id="exampleModal/@item.NumeroCommande" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            @foreach (var i in Model.Paniers.Where(s => s.IdPanier == item.IdPanier).ToList())
                                            {
                                                <div class="one-market">
                                                    <div class="market-img">
                                                        <img src="~/PhotosArticle/@i.PhotoArticle" />
                                                        <div class="market-text">
                                                            <h6>@i.NomArticle</h6>
                                                            <p>Quantité : <span class="badge">@i.Quantité</span></p>
                                                            <p>Prix : <span class="badge">@i.SommeTotale</span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="card col-sm-6">
            <div class="card-header" id="headingTwo" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <h2 class="mb-0">
                    Commandes reçues
                </h2>
            </div>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                <div class="card-body">
                    <div class="row">
                        @foreach (var item in Model.CommandeRecues)
                        {
                            <div class="col-sm-5 one-commande">
                                <p style="font-size:10px;color:gray">Commande du : @item.Date.ToString("dd MMM yyyy")</p>
                                <p>A livrer à : @item.Lieu</p>
                                <h6>Numéro de commande : <span class="text-success">@item.NumeroCommande</span></h6>
                                <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModal/@item.NumeroCommande">Article commandé</button>
                                @if (item.IsDelivred == true)
                                {
                                    <h6 class="text-success">Livré</h6>
                                }
                                else
                                {
                                    <a href="~/Commandes/Delivred/@item.IdPanier" class="btn btn-danger">Marquer livré</a>
                                }
                            </div>
                            <div class="modal fade" id="exampleModal/@item.NumeroCommande" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            @foreach (var i in Model.Paniers.Where(s => s.IdPanier == item.IdPanier).ToList())
                                            {
                                                <div class="one-market">
                                                    <div class="market-img">
                                                        <img src="~/PhotosArticle/@i.PhotoArticle" />
                                                        <div class="market-text">
                                                            <h6>@i.NomArticle</h6>
                                                            <p>Quantité : <span class="badge">@i.Quantité</span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                   

                </div>
            </div>
        </div>
    </div>
    
</div>


